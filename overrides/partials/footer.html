{% block footer %}
<div class="footer-animated-bg">
  <div class="shiny-stars"></div>
  <footer class="custom-footer text-white pt-4 pb-4">
    <div class="container d-flex justify-content-end align-items-center">
      <div class="text-end">
        <p class="mb-1">Â© {{ config.site_name }}</p>
        <div class="visitors">
          <img src="https://visitor-badge.laobi.icu/badge?page_id=shinylegion.github.io.many" alt="visitor badge" />
        </div>
      </div>
    </div>
  </footer>
</div>

<script>
(function () {
  const logoSelector = '.md-logo img';

  const updateLogo = () => {
    const logo = document.querySelector(logoSelector);
    const theme = document.documentElement.getAttribute('data-theme') || 'default';
    if (!logo) return;

    let newSrc = '/many/assets/img/sl-logo.jpg'; // Default fallback

    switch (theme) {
      case 'shiny':
        newSrc = '/many/assets/img/sl-logo.jpg';
        break;
      case 'fire':
        newSrc = '/many/assets/img/logo-fire.png';
        break;
      case 'purple':
        newSrc = '/many/assets/img/logo-water.png';
        break;
    }
  };

  // Watch for DOM changes in case logo is injected later
  const observer = new MutationObserver(() => {
    if (document.querySelector(logoSelector)) {
      updateLogo();
      observer.disconnect(); // Stop once we successfully updated
    }
  });

  observer.observe(document.body, { childList: true, subtree: true });

  // Also react to theme changes (if you're dynamically changing data-theme)
  const themeObserver = new MutationObserver(updateLogo);
  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });

  // Fallback: try to update after short delay
  setTimeout(updateLogo, 200);
})();
</script>



<script>
document.addEventListener("DOMContentLoaded", function () {
  const sparkleContainer = document.querySelector(".shiny-stars");
  const sparkleCount = 25;

  for (let i = 0; i < sparkleCount; i++) {
    const star = document.createElement("div");
    star.className = "shiny-star";

    star.style.top = `${Math.random() * 100}%`;
    star.style.left = `${Math.random() * 100}%`;

    const scale = (Math.random() * 0.9 + 0.6).toFixed(2);
    star.style.setProperty('--star-scale', scale);
    star.style.animationDelay = `${Math.random() * 4}s`;

    sparkleContainer.appendChild(star);
  }
});
</script>
{% endblock %}
